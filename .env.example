# ============================================================
# FastGPT 文件库同步服务 - 环境配置模板
# ============================================================
# 复制此文件为 .env 并填入真实值
# cp .env.example .env

# ==================== 本地文件配置 ====================

# 本地文件目录路径（待同步的目录）
LOCAL_DIR=/Users/qinxiaoqiang/Downloads/ct_manus_subscribe/output/cn

# 支持的文件扩展名（逗号分隔）
SUPPORTED_EXTENSIONS=.pdf,.md,.txt,.json,.py,.js,.html,.css,.xlsx

# 忽略的目录或文件（正则表达式）
IGNORE_PATTERNS=^\..*,.*\.tmp$,__pycache__

# ==================== API 服务配置 ====================

# API 服务监听地址
HOST=0.0.0.0

# API 服务监听端口
PORT=8000

# API 日志级别 (DEBUG|INFO|WARNING|ERROR)
LOG_LEVEL=INFO

# 日志输出目录
LOG_DIR=./logs

# ==================== 认证配置 ====================

# API Bearer Token（用于认证）
# 生成方式：openssl rand -hex 32
API_TOKEN=xiaoyibao

# Token 过期时间（秒）默认不过期
TOKEN_EXPIRE_SECONDS=0

# ==================== FastGPT 配置 ====================

# FastGPT 实例 Base URL
FASTGPT_BASE_URL=https://admin.xiaoyibao.com.cn

# FastGPT API Key（用于主动推送）
FASTGPT_API_KEY=openapi-zKTBXjNAl7wVDTzuHWdfGgrmiLu75Flq4lCmAZtVxaP5EpvawD6y61zqsJp

# FastGPT 数据集 ID（可选）
FASTGPT_DATASET_ID=697b19a113081cf58b45cac3

# ==================== 文件监控配置 ====================

# 启用文件监控（watchdog）
ENABLE_FILE_WATCHER=true

# 文件监控事件类型（created|modified|deleted 逗号分隔）
WATCH_EVENTS=created,modified,deleted

# 监控的最小文件变化间隔（秒）
WATCH_DEBOUNCE_SECONDS=2

# ==================== 定时任务配置 ====================

# 启用定时同步
ENABLE_SCHEDULER=true

# 全量同步周期（小时）
FULL_SYNC_INTERVAL_HOURS=1

# 增量同步周期（分钟）
INCREMENTAL_SYNC_INTERVAL_MINUTES=5

# 定时任务执行时区
TIMEZONE=Asia/Shanghai

# ==================== 数据库配置 ====================

# 数据库类型（sqlite|postgresql|mysql）
DATABASE_TYPE=sqlite

# SQLite 数据库文件路径
SQLITE_DB_PATH=./data/sync.db

# PostgreSQL 连接字符串（如果 DATABASE_TYPE=postgresql）
# DATABASE_URL=postgresql://user:password@localhost:5432/fastgpt_sync

# ==================== 缓存配置 ====================

# 启用 Redis 缓存（可选）
ENABLE_REDIS=false

# Redis 连接字符串
# REDIS_URL=redis://localhost:6379/0

# 缓存过期时间（秒）
CACHE_EXPIRE_SECONDS=3600

# ==================== 推送配置 ====================

# 启用主动推送到 FastGPT
ENABLE_PUSH_TO_FASTGPT=false

# 推送失败重试次数
PUSH_RETRY_TIMES=3

# 推送失败重试延迟（秒）
PUSH_RETRY_DELAY_SECONDS=5

# 推送超时时间（秒）
PUSH_TIMEOUT_SECONDS=30

# ==================== 性能配置 ====================

# 最大并发请求数
MAX_CONCURRENT_REQUESTS=10

# 文件列表分页大小
FILE_LIST_PAGE_SIZE=100

# 文件内容读取限制（字节）
FILE_CONTENT_MAX_SIZE=10485760  # 10MB

# ==================== 安全配置 ====================

# HTTPS 证书路径（可选）
# SSL_CERT_PATH=/path/to/cert.pem
# SSL_KEY_PATH=/path/to/key.pem

# 允许的 CORS 源（逗号分隔）
CORS_ORIGINS=http://localhost:3000,https://your-fastgpt.com

# 请求速率限制（每分钟请求数）
RATE_LIMIT_PER_MINUTE=100

# ==================== 备份配置 ====================

# 启用备份功能
ENABLE_BACKUP=false

# 备份目录
BACKUP_DIR=./backups

# 备份保留天数
BACKUP_RETENTION_DAYS=7

# 备份周期（小时）
BACKUP_INTERVAL_HOURS=24

# ==================== 监控和告警 ====================

# 启用健康检查
ENABLE_HEALTH_CHECK=true

# 健康检查间隔（秒）
HEALTH_CHECK_INTERVAL_SECONDS=30

# 同步失败阈值（连续失败次数）
SYNC_FAILURE_THRESHOLD=3

# 告警通知方式（email|slack|webhook|none）
ALERT_METHOD=none

# 告警邮件地址
# ALERT_EMAIL=admin@example.com

# Slack Webhook URL
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ==================== 开发配置 ====================

# 调试模式
DEBUG=false

# 开发环境下是否重新加载应用
RELOAD=true

# 测试模式
TESTING=false
